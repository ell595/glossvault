import{_ as u,e as a,o as c,a as m,b as e,w as h,h as l,v as d,t as g}from"./styles-DH0dk-0P.js";const f={name:"loginForm",emits:["update"],data(){return{inputtedEmail:a(""),inputtedPassword:a(""),username:null,errors:[]}},methods:{async loginUser(){this.errors=[];try{const o=this.inputtedEmail,r=this.inputtedPassword,n=await fetch("http://api-glossvault.ell595.site/api/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:o,password:r})}),s=await n.json();n.ok?(localStorage.setItem("token",s.token),this.$router.push({path:"dashboard"})):(console.log(s.message),console.error("Error response:",s),s.message?(this.errors.push(s.message),document.getElementById("error").innerHTML=s.message):this.errors.push("An unexpected error occurred."))}catch(o){console.error("Network error:",o),this.errors.push("A network error occured. Please try again.")}}}},w={class:"background"},_=e("div",{class:"header"},[e("h3",null,"Welcome to"),e("h1",null,"GlossVault")],-1),y={class:"welcome"},b=e("label",{for:"email"},"Email",-1),v=e("label",{for:"password"},"Password",-1),k=e("div",null,[e("a",{href:"/register"},"Or create an account"),e("button",{type:"submit"},"Login")],-1),E=["v-for"];function P(o,r,p,n,s,i){return c(),m("div",w,[_,e("div",y,[e("form",{onSubmit:r[2]||(r[2]=h((...t)=>i.loginUser&&i.loginUser(...t),["prevent"]))},[b,l(e("input",{name:"email",type:"email",required:"","onUpdate:modelValue":r[0]||(r[0]=t=>s.inputtedEmail=t)},null,512),[[d,s.inputtedEmail]]),v,l(e("input",{name:"password",type:"password",required:"","onUpdate:modelValue":r[1]||(r[1]=t=>s.inputtedPassword=t)},null,512),[[d,s.inputtedPassword]]),k,e("p",{id:"error","v-for":o.error in s.errors},g(o.error),9,E)],32)])])}const U=u(f,[["render",P]]);export{U as default};
