import{_ as p,o as i,a as d,b as e,d as c,t as r,g as _,k as y,F as m,l as f,m as v}from"./styles-BCHjIOLW.js";const C={methods:{async deleteGloss(){try{const s=this.gloss.id,t=localStorage.token;(await fetch("//api-glossvault.ell595.site/api/deletegloss",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({gloss_id:s,token:t})})).status===200&&this.$emit("delete")}catch(s){console.error(s.message)}}},props:{gloss:Object},mounted(){this.gloss.image_path}},k={id:"glossCard"},b=["src"],B=["href"];function G(s,t,o,a,l,n){return i(),d("div",k,[e("img",{src:"https://glossvault.s3.eu-north-1.amazonaws.com/"+o.gloss.image_path},null,8,b),e("p",null,[c("Name: "),e("span",null,r(o.gloss.name),1)]),e("p",null,[c("Colour: "),e("span",null,r(o.gloss.colour),1)]),e("p",null,[c("Brand: "),e("span",null,r(o.gloss.brand),1)]),e("a",{href:"https://www.amazon.co.uk/s?k="+o.gloss.name+" "+o.gloss.brand+" lip+gloss&i=beauty&camp=1634&creative=6738&linkId=8cac87ef773c8da26d49e3d2582e0d16",target:"”_blank”"},"Search on Amazon",8,B),e("button",{onClick:t[0]||(t[0]=(...g)=>n.deleteGloss&&n.deleteGloss(...g))},"Delete")])}const E=p(C,[["render",G]]),I={name:"CollectionPage",data(){return{isLoading:!0,collection:null}},methods:{async getCollection(){this.isLoading=!0;const s=this.$route.params.id;try{const o={token:localStorage.token,collectionId:s},a=await fetch("//api-glossvault.ell595.site/api/getcollection",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(o)}),l=await a.json();a.status===200&&(this.collection=l[0][0],this.isLoading=!1)}catch(t){console.error(t.message)}},async addGloss(){this.isLoading=!0;let s=new FormData;s.append("image",document.getElementById("image").files[0]),s.append("name",document.getElementById("glossName").value),s.append("colour",document.getElementById("glossColour").value),s.append("brand",document.getElementById("glossBrand").value),s.append("token",localStorage.token),s.append("collection_id",this.$route.params.id);try{(await fetch("//api-glossvault.ell595.site/api/newgloss",{method:"POST",body:s})).status===201&&(this.getCollection(),document.getElementById("image").value="",document.getElementById("glossName").value="",document.getElementById("glossColour").value="",document.getElementById("glossBrand").value="",this.isLoading=!1)}catch(t){console.error(t.message)}}},components:{GlossCard:E},mounted(){this.getCollection()}},N={key:0,class:"loading"},w={id:"grid"},S={id:"header"},x=e("h4",null,"Collection Name:",-1),L={id:"addGloss"},D=e("div",{id:"inputs"},[e("input",{id:"glossName",type:"text",placeholder:"Gloss Name"}),e("input",{id:"glossColour",type:"text",placeholder:"Gloss Colour"}),e("input",{id:"glossBrand",type:"text",placeholder:"Gloss Brand"})],-1),T={id:"buttons"},j=e("label",{for:"image",class:"button"},[c("Upload an Image "),e("input",{type:"file",accept:"image/*;capture=camera",name:"image",id:"image",style:{display:"none"}})],-1),O={id:"glosses"};function P(s,t,o,a,l,n){const g=_("GlossCard");return i(),d(m,null,[l.isLoading?(i(),d("div",N)):y("",!0),e("div",w,[e("div",S,[x,e("h2",null,r(l.collection.name),1)]),e("div",L,[D,e("div",T,[j,e("div",{class:"button",onClick:t[0]||(t[0]=(...u)=>n.addGloss&&n.addGloss(...u))},"Add Gloss")])]),e("div",O,[(i(!0),d(m,null,f(l.collection.glosses,(u,h)=>(i(),v(g,{key:h,gloss:u,onDelete:n.getCollection},null,8,["gloss","onDelete"]))),128))])])],64)}const A=p(I,[["render",P]]);export{A as default};
