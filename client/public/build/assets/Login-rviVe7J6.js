import{_ as u,e as l,o as p,a as m,b as e,w as h,h as d,v as c}from"./styles-LGP4DXxw.js";const g={name:"loginForm",emits:["update"],data(){return{inputtedEmail:l(""),inputtedPassword:l(""),username:null}},methods:{async loginUser(){document.getElementById("error").innerHTML="";try{const r=this.inputtedEmail,t=this.inputtedPassword,i={email:r,password:t};console.log(i);const n=await fetch("http://api-glossvault.ell595.site/api/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(i)});console.log(n);const o=await n.json();console.log(o),n.ok?(localStorage.setItem("token",o.token),this.$router.push({path:"dashboard"})):o.message?document.getElementById("error").innerHTML=o.message:document.getElementById("error").innerHTML="An unexpected error occurred."}catch(r){console.error("Network error:",r),this.errors.push("A network error occured. Please try again.")}}}},w={class:"background"},_=e("div",{class:"header"},[e("h3",null,"Welcome to"),e("h1",null,"GlossVault")],-1),f={class:"welcome"},y=e("label",{for:"email"},"Email",-1),b=e("label",{for:"password"},"Password",-1),v=e("div",null,[e("a",{href:"/register"},"Or create an account"),e("button",{type:"submit"},"Login")],-1),E=e("p",{id:"error"},null,-1);function k(r,t,i,n,o,a){return p(),m("div",w,[_,e("div",f,[e("form",{onSubmit:t[2]||(t[2]=h((...s)=>a.loginUser&&a.loginUser(...s),["prevent"]))},[y,d(e("input",{name:"email",type:"email",required:"","onUpdate:modelValue":t[0]||(t[0]=s=>o.inputtedEmail=s)},null,512),[[c,o.inputtedEmail]]),b,d(e("input",{name:"password",type:"password",required:"","onUpdate:modelValue":t[1]||(t[1]=s=>o.inputtedPassword=s)},null,512),[[c,o.inputtedPassword]]),v,E],32)])])}const B=u(g,[["render",k]]);export{B as default};
