import{_ as f,e as d,f as m,g as c,o as h,a as V,b as e,w as y,h as l,v as u,i as g,j as P,t as v,d as C}from"./styles-DGGjQSMw.js";const E={name:"registerForm",emits:["update"],data(){return{startValidation:d(!1),inputtedUsername:d(""),inputtedEmail:d(""),inputtedPassword:d(""),confirmPassword:d(""),isValidEmail:m(()=>this.startValidation?/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(this.inputtedEmail):!1),isStrongPassword:m(()=>this.startValidation?/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/.test(this.inputtedPassword):!1),isPasswordConfirmed:m(()=>this.startValidation?this.inputtedPassword===this.confirmPassword:!1),userID:null,errors:[]}},methods:{clearValidation(i){i.target.setCustomValidity(""),i.target.reportValidity()},async registerUser(){this.errors=[],this.startValidation=!0;var i=document.getElementById("email");this.isValidEmail?(i.setCustomValidity(""),i.reportValidity()):(i.setCustomValidity("Please enter a valid email address"),i.reportValidity());var s=document.getElementById("password");this.isStrongPassword?(s.setCustomValidity(""),s.reportValidity()):(s.setCustomValidity("Password must contain at least 8 characters, a capital letter and a special character"),s.reportValidity());var n=document.getElementById("confirmPassword");if(this.isPasswordConfirmed?(n.setCustomValidity(""),n.reportValidity()):(n.setCustomValidity("Please ensure passwords match"),n.reportValidity()),this.isPasswordConfirmed&&this.isStrongPassword&&this.isValidEmail)try{const a=this.inputtedUsername,r=this.inputtedEmail,o=this.inputtedPassword,t=await fetch("http://api-glossvault.ell595.site/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:r,password:o})}),w=await t.json();t.status===201?(localStorage.setItem("token",w.token),this.$router.push({path:"dashboard"})):this.errors.push(t.message)}catch(a){this.errors.push(a.data.message),console.log(a),console.error(a.message)}}}},U={class:"background"},b=e("div",{class:"header"},[e("h3",null,"Welcome to"),e("h1",null,"GlossVault")],-1),I={class:"welcome"},_=e("label",{for:"username"},"Username",-1),B=e("label",{for:"email"},"Email",-1),S=e("label",{for:"password"},"Password",-1),k=e("label",{for:"confirmPassword"},"Confirm Password",-1),q=e("a",{href:"/login"},"Or log in to your account",-1),x=["v-for"];function N(i,s,n,a,r,o){const p=c("Button");return h(),V("div",U,[b,e("div",I,[e("form",{onSubmit:s[8]||(s[8]=y(t=>o.registerUser(),["prevent"]))},[_,l(e("input",{name:"username",required:"","onUpdate:modelValue":s[0]||(s[0]=t=>r.inputtedUsername=t)},null,512),[[u,r.inputtedUsername]]),B,l(e("input",{id:"email",name:"email",type:"email",required:"","onUpdate:modelValue":s[1]||(s[1]=t=>r.inputtedEmail=t),onInput:s[2]||(s[2]=t=>o.clearValidation(t))},null,544),[[u,r.inputtedEmail]]),S,l(e("input",{id:"password",name:"password",type:"password",required:"","onUpdate:modelValue":s[3]||(s[3]=t=>r.inputtedPassword=t),onInput:s[4]||(s[4]=t=>o.clearValidation(t))},null,544),[[u,r.inputtedPassword]]),k,l(e("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:"","onUpdate:modelValue":s[5]||(s[5]=t=>r.confirmPassword=t),onInput:s[6]||(s[6]=t=>o.clearValidation(t))},null,544),[[u,r.confirmPassword]]),e("div",null,[q,g(p,{onClick:s[7]||(s[7]=t=>o.registerUser())},{default:P(()=>[C("Register")]),_:1})]),e("p",{id:"error","v-for":i.error in r.errors},v(i.error),9,x)],32)])])}const j=f(E,[["render",N]]);export{j as default};
