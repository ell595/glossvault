import{_ as p,o as l,a,b as o,t as u,g as f,k as h,F as m,l as y,m as C,p as k,n as b}from"./styles-BCHjIOLW.js";const v={methods:{async deleteCollection(){try{const e=this.collection.id,t=localStorage.token;(await fetch("//api-glossvault.ell595.site/api/deletecollection",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({collection_id:e,token:t})})).status===200&&this.$emit("delete")}catch(e){console.error(e.message)}}},props:{collection:Object}},S={id:"collectionCard"},N=["href"];function L(e,t,n,s,c,i){return l(),a("div",S,[o("h4",null,u(n.collection.name),1),o("p",null,"No. of glosses: "+u(n.collection.glosses.length),1),o("button",null,[o("a",{href:`/collections/${n.collection.id}`},"View",8,N)]),o("button",{onClick:t[0]||(t[0]=(...d)=>i.deleteCollection&&i.deleteCollection(...d))},"Delete")])}const w=p(v,[["render",L]]),B={name:"dashBoard",beforeRouteEnter(e,t,n){localStorage.token?n():n("/home")},data(){return{isLoading:!0,username:null,collections:[]}},methods:{async addCollection(){this.isLoading=!0;try{const e=document.getElementById("collectionName").value,t=localStorage.token;(await fetch("//api-glossvault.ell595.site/api/newcollection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,token:t})})).status===201&&(this.getCollections(),document.getElementById("collectionName").value="",this.isLoading=!1)}catch(e){console.error(e.message)}},async getCollections(){this.isLoading=!0;try{const t={token:localStorage.token},n=await fetch("//api-glossvault.ell595.site/api/getcollections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),s=await n.json();n.status===200&&(this.collections=s[0],this.username=s[1][0].username,this.isLoading=!1)}catch(e){console.err(e.message)}}},components:{CollectionCard:w},mounted(){this.getCollections()}},_=e=>(k("data-v-9f5d36b5"),e=e(),b(),e),D={key:0,class:"loading"},E={id:"grid"},I={id:"header"},O=_(()=>o("h1",null,"Dashboard",-1)),T={id:"addCollection"},j={key:0},x={id:"addCollectionForm"},F=_(()=>o("input",{id:"collectionName",type:"text",placeholder:"Name"},null,-1)),J={key:0,id:"collections"};function V(e,t,n,s,c,i){const d=f("CollectionCard");return l(),a(m,null,[c.isLoading?(l(),a("div",D)):h("",!0),o("div",E,[o("div",I,[O,o("h3",null,"Welcome, "+u(c.username),1)]),o("div",T,[c.collections.length===0?(l(),a("p",j,"Add a collection to get started!")):h("",!0),o("div",x,[F,o("button",{onClick:t[0]||(t[0]=(...r)=>i.addCollection&&i.addCollection(...r))},"Add")])]),c.isLoading?h("",!0):(l(),a("div",J,[(l(!0),a(m,null,y(c.collections,(r,g)=>(l(),C(d,{key:g,collection:r,onDelete:i.getCollections},null,8,["collection","onDelete"]))),128))]))])],64)}const P=p(B,[["render",V],["__scopeId","data-v-9f5d36b5"]]);export{P as default};
