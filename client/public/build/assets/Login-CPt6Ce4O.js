import{_ as u,e as a,o as c,a as m,b as e,w as h,h as l,v as d,t as f}from"./styles-R55qHg-Z.js";const g={name:"loginForm",emits:["update"],data(){return{inputtedEmail:a(""),inputtedPassword:a(""),username:null,errors:[]}},methods:{async loginUser(){this.errors=[];const n=this.inputtedEmail,s=this.inputtedPassword;await fetch("http://api-glossvault.ell595.site/api/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:n,password:s})}).then(o=>{if(o.status===200){const t=o.json();localStorage.setItem("token",t.token),this.$router.push({path:"dashboard"})}else this.errors.push(o.message)}).catch(o=>{console.log("Error",o.response),console.log("fetch catch"),console.error(o.message)})}}},_={class:"background"},w=e("div",{class:"header"},[e("h3",null,"Welcome to"),e("h1",null,"GlossVault")],-1),b={class:"welcome"},v=e("label",{for:"email"},"Email",-1),y=e("label",{for:"password"},"Password",-1),E=e("div",null,[e("a",{href:"/register"},"Or create an account"),e("button",{type:"submit"},"Login")],-1),P=["v-for"];function k(n,s,p,o,t,i){return c(),m("div",_,[w,e("div",b,[e("form",{onSubmit:s[2]||(s[2]=h((...r)=>i.loginUser&&i.loginUser(...r),["prevent"]))},[v,l(e("input",{name:"email",type:"email",required:"","onUpdate:modelValue":s[0]||(s[0]=r=>t.inputtedEmail=r)},null,512),[[d,t.inputtedEmail]]),y,l(e("input",{name:"password",type:"password",required:"","onUpdate:modelValue":s[1]||(s[1]=r=>t.inputtedPassword=r)},null,512),[[d,t.inputtedPassword]]),E,e("p",{id:"error","v-for":n.error in t.errors},f(n.error),9,P)],32)])])}const U=u(g,[["render",k]]);export{U as default};
