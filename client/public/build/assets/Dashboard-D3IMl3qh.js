import{_ as p,o as n,a as i,b as o,t as u,g as v,k as d,F as _,l as y,m as f,p as C,n as b,q as k}from"./styles-DBmWAwbP.js";const S={methods:{async deleteCollection(){try{const e=this.collection.id,t=localStorage.token;(await fetch("http://api.gloss.vault/api/deletecollection",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({collection_id:e,token:t})})).status===200&&this.$emit("delete")}catch(e){console.error(e.message)}}},props:{collection:Object}},L={id:"collectionCard"},N=["href"];function w(e,t,s,l,c,a){return n(),i("div",L,[o("h4",null,u(s.collection.name),1),o("p",null,"No. of glosses: "+u(s.collection.glosses.length),1),o("button",null,[o("a",{href:`/collections/${s.collection.id}`},"View",8,N)]),o("button",{onClick:t[0]||(t[0]=(...r)=>a.deleteCollection&&a.deleteCollection(...r))},"Delete")])}const B=p(S,[["render",w]]),D={name:"dashBoard",beforeRouteEnter(e,t,s){localStorage.token?s():s("/home")},data(){return{isLoading:!0,username:null,collections:[]}},methods:{async addCollection(){this.isLoading=!0;try{const e=document.getElementById("collectionName").value,t=localStorage.token;(await fetch("http://api.gloss.vault/api/newcollection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,token:t})})).status===201&&(this.getCollections(),document.getElementById("collectionName").value="",this.isLoading=!1)}catch(e){console.error(e.message)}},async getCollections(){this.isLoading=!0;try{const t={token:localStorage.token},s=await fetch("http://api.gloss.vault/api/getcollections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),l=await s.json();s.status===200&&(this.collections=l[0],this.username=l[1][0].username,this.isLoading=!1)}catch(e){console.err(e.message)}}},components:{CollectionCard:B},mounted(){this.getCollections()}},m=e=>(C("data-v-e065859b"),e=e(),b(),e),E={key:0,class:"loading"},I={id:"grid"},O={id:"header"},T=m(()=>o("h1",null,"Dashboard",-1)),j={id:"addCollection"},x={key:0},V={id:"addCollectionForm"},F=m(()=>o("input",{id:"collectionName",type:"text",placeholder:"Name"},null,-1)),J={key:0},A=k('<div class="loader-container" data-v-e065859b><div class="bouncing-dots" data-v-e065859b><div class="dot" data-v-e065859b></div><div class="dot" data-v-e065859b></div><div class="dot" data-v-e065859b></div></div></div>',1),P=[A],R={key:1,id:"collections"};function q(e,t,s,l,c,a){const r=v("CollectionCard");return n(),i(_,null,[c.isLoading?(n(),i("div",E,"Loading")):d("",!0),o("div",I,[o("div",O,[T,o("h3",null,"Welcome, "+u(c.username),1)]),o("div",j,[c.collections.length===0?(n(),i("p",x,"Add a collection to get started!")):d("",!0),o("div",V,[F,o("button",{onClick:t[0]||(t[0]=(...h)=>a.addCollection&&a.addCollection(...h))},"Add")])]),c.isLoading?(n(),i("div",J,P)):d("",!0),c.isLoading?d("",!0):(n(),i("div",R,[(n(!0),i(_,null,y(c.collections,(h,g)=>(n(),f(r,{key:g,collection:h,onDelete:a.getCollections},null,8,["collection","onDelete"]))),128))]))])],64)}const z=p(D,[["render",q],["__scopeId","data-v-e065859b"]]);export{z as default};
