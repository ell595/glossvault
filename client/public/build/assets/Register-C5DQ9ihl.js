import{_ as c,e as n,f as p,g as f,o as V,a as h,b as s,w as y,h as l,v as u,i as P,j as g,d as v}from"./styles-D1YojcLJ.js";const C={name:"registerForm",emits:["update"],data(){return{startValidation:n(!1),inputtedUsername:n(""),inputtedEmail:n(""),inputtedPassword:n(""),confirmPassword:n(""),isValidEmail:p(()=>this.startValidation?/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(this.inputtedEmail):!1),isStrongPassword:p(()=>this.startValidation?/(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^A-Za-z0-9])(?=.{8,})/.test(this.inputtedPassword):!1),isPasswordConfirmed:p(()=>this.startValidation?this.inputtedPassword===this.confirmPassword:!1),userID:null,errors:[]}},methods:{clearValidation(i){i.target.setCustomValidity(""),i.target.reportValidity()},async registerUser(){this.errors=[],this.startValidation=!0;var i=document.getElementById("email");this.isValidEmail?(i.setCustomValidity(""),i.reportValidity()):(i.setCustomValidity("Please enter a valid email address"),i.reportValidity());var e=document.getElementById("password");this.isStrongPassword?(e.setCustomValidity(""),e.reportValidity()):(e.setCustomValidity("Password must contain at least 8 characters, a capital letter and a special character"),e.reportValidity());var a=document.getElementById("confirmPassword");if(this.isPasswordConfirmed?(a.setCustomValidity(""),a.reportValidity()):(a.setCustomValidity("Please ensure passwords match"),a.reportValidity()),this.isPasswordConfirmed&&this.isStrongPassword&&this.isValidEmail)try{const d=this.inputtedUsername,r=this.inputtedEmail,o=this.inputtedPassword,t=await fetch("http://api-glossvault.ell595.site/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,email:r,password:o})}),m=await t.json();t.ok?(localStorage.setItem("token",m.token),this.$router.push({path:"dashboard"})):m.message?document.getElementById("error").innerHTML=m.message:document.getElementById("error").innerHTML="An unexpected error occurred."}catch(d){console.error("Network error:",d),this.errors.push("A network error occured. Please try again.")}}}},E={class:"background"},I=s("div",{class:"header"},[s("h3",null,"Welcome to"),s("h1",null,"GlossVault")],-1),U={class:"welcome"},_=s("label",{for:"username"},"Username",-1),b=s("label",{for:"email"},"Email",-1),B=s("label",{for:"password"},"Password",-1),k=s("label",{for:"confirmPassword"},"Confirm Password",-1),x=s("a",{href:"/login"},"Or log in to your account",-1),S=s("p",{id:"error"},null,-1);function T(i,e,a,d,r,o){const w=f("Button");return V(),h("div",E,[I,s("div",U,[s("form",{onSubmit:e[8]||(e[8]=y(t=>o.registerUser(),["prevent"]))},[_,l(s("input",{name:"username",required:"","onUpdate:modelValue":e[0]||(e[0]=t=>r.inputtedUsername=t)},null,512),[[u,r.inputtedUsername]]),b,l(s("input",{id:"email",name:"email",type:"email",required:"","onUpdate:modelValue":e[1]||(e[1]=t=>r.inputtedEmail=t),onInput:e[2]||(e[2]=t=>o.clearValidation(t))},null,544),[[u,r.inputtedEmail]]),B,l(s("input",{id:"password",name:"password",type:"password",required:"","onUpdate:modelValue":e[3]||(e[3]=t=>r.inputtedPassword=t),onInput:e[4]||(e[4]=t=>o.clearValidation(t))},null,544),[[u,r.inputtedPassword]]),k,l(s("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:"","onUpdate:modelValue":e[5]||(e[5]=t=>r.confirmPassword=t),onInput:e[6]||(e[6]=t=>o.clearValidation(t))},null,544),[[u,r.confirmPassword]]),s("div",null,[x,P(w,{onClick:e[7]||(e[7]=t=>o.registerUser())},{default:g(()=>[v("Register")]),_:1})]),S],32)])])}const q=c(C,[["render",T]]);export{q as default};
